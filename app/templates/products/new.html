{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
  <div>
    <h3 class="mb-0">Nuevo producto</h3>
    <div class="text-muted small">Crea productos y registra stock inicial</div>
  </div>
  <a class="btn btn-outline-dark btn-sm" href="{{ url_for('products.list_products') }}">← Volver</a>
</div>

<div class="card shadow-sm">
  <div class="card-body">

    <form method="post" class="row g-3">

      <div class="col-12">
        <label class="form-label mb-1">Nombre</label>
        <input class="form-control" name="name" placeholder="Ej: Coca Cola 600ml" required>
        <div class="text-muted small">Tip: incluye presentación (ml, kg, pieza) para evitar confusiones.</div>
      </div>

      <div class="col-12 col-md-4">
        <label class="form-label mb-1">Precio</label>
        <input class="form-control" name="price" type="number" step="0.01" min="0" placeholder="0.00" required>
      </div>

      <div class="col-12 col-md-4">
        <label class="form-label mb-1">Stock inicial</label>
        <input class="form-control" name="stock" type="number" step="1" min="0" value="0">
      </div>

      <div class="col-12 col-md-4">
        <label class="form-label mb-1">Estado</label>
        <select class="form-select" name="is_active">
          <option value="1" selected>Activo</option>
          <option value="0">Inactivo</option>
        </select>
      </div>

      <div class="col-12">
        <div class="border rounded p-3 bg-light">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="merge_if_exists" id="merge_if_exists" value="1" checked>
            <label class="form-check-label fw-semibold" for="merge_if_exists">
              Si el producto ya existe, sumar stock al existente (recomendado)
            </label>
            <div class="text-muted small">
              Evita duplicados. Si encuentra el mismo nombre, suma el stock en vez de crear otro producto.
            </div>
          </div>

          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" name="update_price_if_merge" id="update_price_if_merge" value="1">
            <label class="form-check-label" for="update_price_if_merge">
              Si se suma stock, también actualizar el precio al nuevo
            </label>
            <div class="text-muted small">
              Útil cuando cambia el precio del proveedor y quieres que quede actualizado.
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 d-grid">
        <button class="btn btn-success">Guardar</button>
      </div>

    </form>

  </div>
</div>

{% endblock %}
